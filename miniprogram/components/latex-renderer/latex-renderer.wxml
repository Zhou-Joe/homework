<!--components/latex-renderer/latex-renderer.wxml-->
<view class="latex-container">
  <!-- 增强版本：支持文本和图片混合渲染 -->
  <block wx:for="{{renderedContent}}" wx:key="key">
    <!-- 文本段落 -->
    <text wx:if="{{item.type === 'text'}}"
          class="text-segment"
          style="font-size: {{fontSize}}px; line-height: 1.6;">{{item.content}}</text>

    <!-- LaTeX图片段落 -->
    <image wx:if="{{item.type === 'image'}}"
           class="latex-image"
           src="{{item.content}}"
           mode="aspectFit"
           style="vertical-align: middle; margin: 4px 0;"
           binderror="onImageError"
           data-key="{{index}}"></image>

    <!-- 后备文本段落 -->
    <text wx:if="{{item.type === 'fallback-text'}}"
          class="fallback-text"
          style="font-size: {{fontSize}}px; line-height: 1.6; color: #666; font-style: italic;">{{item.content}}</text>
  </block>

  <!-- 加载状态 -->
  <view class="loading-placeholder" wx:if="{{isLoading}}">
    <text class="loading-text">数学公式渲染中...</text>
  </view>

  <!-- 无内容时的占位 -->
  <view class="empty-placeholder" wx:if="{{!renderedContent || renderedContent.length === 0}}">
    <text class="empty-text">暂无内容</text>
  </view>
</view>
