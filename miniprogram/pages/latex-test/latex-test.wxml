<view class="container">
  <!-- æ ‡é¢˜ -->
  <view class="header">
    <text class="title">ğŸ§ª LaTeXæ¸²æŸ“æµ‹è¯•</text>
    <text class="subtitle">æµ‹è¯•æ•°å­¦å…¬å¼åœ¨å°ç¨‹åºä¸­çš„æ˜¾ç¤ºæ•ˆæœ</text>
  </view>

  <!-- æ§åˆ¶é¢æ¿ -->
  <view class="control-panel">
    <view class="control-group">
      <text class="control-label">å­—ä½“å¤§å°: {{fontSize}}px</text>
      <slider
        class="font-slider"
        min="12"
        max="24"
        value="{{fontSize}}"
        bindchange="adjustFontSize"
        show-value
      />
    </view>

    <button class="debug-btn" bindtap="toggleDebug">
      {{showDebug ? 'éšè—' : 'æ˜¾ç¤º'}}è°ƒè¯•ä¿¡æ¯
    </button>
  </view>

  <!-- æµ‹è¯•ç”¨ä¾‹é€‰æ‹© -->
  <view class="case-selector">
    <scroll-view class="case-list" scroll-x="true">
      <block wx:for="{{testCases}}" wx:key="index">
        <button
          class="case-item {{currentCase === index ? 'active' : ''}}"
          bindtap="switchCase"
          data-index="{{index}}"
        >
          {{item.name}}
        </button>
      </block>
    </scroll-view>
  </view>

  <!-- å½“å‰æµ‹è¯•å†…å®¹ -->
  <view class="test-content">
    <view class="test-header">
      <text class="test-title">{{testCases[currentCase].name}}</text>
      <button
        class="copy-btn"
        bindtap="copyLatex"
        data-content="{{testCases[currentCase].content}}"
      >
        å¤åˆ¶
      </button>
    </view>

    <!-- è°ƒè¯•ä¿¡æ¯ -->
    <view class="debug-info" wx:if="{{showDebug}}">
      <text class="debug-title">ğŸ” è°ƒè¯•ä¿¡æ¯</text>
      <view class="debug-item">
        <text class="debug-label">åŸå§‹å†…å®¹:</text>
        <text class="debug-value" bindtap="testRawText" data-content="{{testCases[currentCase].content}}">
          ç‚¹å‡»æŸ¥çœ‹å®Œæ•´å†…å®¹
        </text>
      </view>
      <view class="debug-item">
        <text class="debug-label">å­—ä½“å¤§å°:</text>
        <text class="debug-value">{{fontSize}}px</text>
      </view>
    </view>

    <!-- æµ‹è¯•åŒºåŸŸ -->
    <view class="test-section">
      <!-- 1. ç›´æ¥æ–‡æœ¬æ˜¾ç¤º -->
      <view class="test-block">
        <text class="block-title">1. ç›´æ¥æ–‡æœ¬æ˜¾ç¤º</text>
        <view class="text-only" style="font-size: {{fontSize}}px;">
          {{testCases[currentCase].content}}
        </view>
      </view>

      <!-- 2. LaTeXç»„ä»¶æ¸²æŸ“ -->
      <view class="test-block">
        <text class="block-title">2. LaTeXç»„ä»¶æ¸²æŸ“</text>
        <view class="latex-wrapper">
          <latex-renderer
            content="{{testCases[currentCase].content}}"
            font-size="{{fontSize}}"
          />
        </view>
      </view>

      <!-- 3. å¸¦æ ·å¼çš„LaTeXç»„ä»¶ -->
      <view class="test-block">
        <text class="block-title">3. å¸¦æ ·å¼çš„LaTeXç»„ä»¶</text>
        <view class="latex-wrapper styled">
          <latex-renderer
            content="{{testCases[currentCase].content}}"
            font-size="{{fontSize}}"
          />
        </view>
      </view>

      <!-- 4. ç®€å•LaTeXæµ‹è¯• -->
      <view class="test-block">
        <text class="block-title">4. ç®€å•LaTeX: {{testCases[currentCase].latex}}</text>
        <view class="latex-wrapper">
          <latex-renderer
            content="{{testCases[currentCase].latex}}"
            font-size="{{fontSize}}"
          />
        </view>
      </view>
    </view>

    <!-- çŠ¶æ€æç¤º -->
    <view class="status-tip">
      <text class="tip-text">ğŸ’¡ å¦‚æœä»¥ä¸Šæ˜¾ç¤ºä¸ä¸€è‡´ï¼Œè¯´æ˜LaTeXç»„ä»¶å¯èƒ½å­˜åœ¨é—®é¢˜</text>
    </view>
  </view>
</view>